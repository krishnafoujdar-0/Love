<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Magical Story</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Dancing Script', cursive;
            overflow: hidden;
            background-color: #0d021a;
        }
        
        /* --- Z-INDEX FIX: Alag alag layer banayi gayi --- */
        #slideshow-container {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 1; /* Photo sabse peeche */
        }
        #background-effects {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 2; /* Hearts photo ke upar */
        }
        #main-content {
            z-index: 3; /* Button aur text sabse upar */
            position: relative;
        }

        /* --- Background Effects --- */
        .heart {
            position: absolute; width: 20px; height: 20px; 
            background: rgba(255, 0, 0, 0.5);
            opacity: 0; transform: rotate(-45deg); 
            animation: float-up 10s infinite linear;
        }
        .heart::before, .heart::after {
            content: ''; position: absolute; width: 20px; height: 20px;
            background: rgba(255, 0, 0, 0.5); 
            border-radius: 50%;
        }
        .heart::before { top: -10px; left: 0; }
        .heart::after { top: 0; left: 10px; }
        
        @keyframes float-up { 
            0% { transform: translateY(100vh) rotate(-45deg); opacity: 1; } 
            100% { transform: translateY(-10vh) rotate(-45deg); opacity: 0; } 
        }
        
        .sparkle {
            position: absolute; width: 3px; height: 3px; background: white; border-radius: 50%;
            box-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #ff00ff;
            animation: sparkle-anim 1.5s infinite;
        }
        @keyframes sparkle-anim { 0%, 100% { opacity: 0; transform: scale(0.5); } 50% { opacity: 1; transform: scale(1.2); } }

        /* --- Smooth Fade-in for First Photo --- */
        .initial-fade-in { animation: initial-fade 2s ease-in-out forwards; }
        @keyframes initial-fade { from { opacity: 0; } to { opacity: 1; } }

        /* --- Blending Transition System --- */
        .slide {
            width: 100%; height: 100%; object-fit: cover;
            position: absolute; top: 0; left: 0;
            transform: scale(1.1);
        }
        .slide.top { z-index: 10; }
        .slide.bottom { z-index: 9; }

        @keyframes ken-burns { 100% { transform: scale(1.25); } }
        .ken-burns { animation: ken-burns 6s ease-in-out forwards; }

        .animate-out { animation-duration: 1.5s; animation-fill-mode: forwards; }
        .animate-in { animation-duration: 1.5s; animation-fill-mode: forwards; }

        @keyframes fade-out { to { opacity: 0; } } .fade-out { animation-name: fade-out; }
        @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } } .fade-in { animation-name: fade-in; }
        @keyframes slide-out-left { to { transform: translateX(-100%) scale(1.1); } } .slide-out-left { animation-name: slide-out-left; }
        @keyframes slide-in-right { from { transform: translateX(100%) scale(1.1); } to { transform: translateX(0) scale(1.1); } } .slide-in-right { animation-name: slide-in-right; }
        @keyframes slide-out-right { to { transform: translateX(100%) scale(1.1); } } .slide-out-right { animation-name: slide-out-right; }
        @keyframes slide-in-left { from { transform: translateX(-100%) scale(1.1); } to { transform: translateX(0) scale(1.1); } } .slide-in-left { animation-name: slide-in-left; }
        @keyframes zoom-out { to { opacity: 0; transform: scale(1.5); } } .zoom-out { animation-name: zoom-out; }
        @keyframes zoom-in { from { opacity: 0; transform: scale(0.5); } to { opacity: 1; transform: scale(1.1); } } .zoom-in { animation-name: zoom-in; }

        /* --- Home Page & Message Styling --- */
        .glow-button { animation: pulse 2s infinite; }
        @keyframes pulse { 0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 82, 82, 0.7); } 70% { transform: scale(1.05); box-shadow: 0 0 10px 20px rgba(255, 82, 82, 0); } 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 82, 82, 0); } }
        .fade-in-screen { animation: fadeInScreen 1.5s ease-in-out forwards; }
        .fade-out-screen { animation: fadeOutScreen 1.5s ease-in-out forwards; }
        @keyframes fadeInScreen { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
        @keyframes fadeOutScreen { from { opacity: 1; transform: scale(1); } to { opacity: 0; transform: scale(0.8); } }
        #love-text { animation: text-glow 2s ease-in-out infinite alternate; }
        @keyframes text-glow { from { text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #e60073; } to { text-shadow: 0 0 20px #fff, 0 0 30px #ff4da6, 0 0 40px #ff4da6; } }
    </style>
</head>
<body class="bg-gradient-to-t from-black via-indigo-900 to-black">

    <audio id="local-song" src="song.mp3" loop></audio>

    <div id="background-effects"></div>
    <div id="slideshow-container" class="hidden opacity-0"> <!-- Shuruat me opacity 0 for smooth fade-in -->
        <img id="image1" class="slide bottom" alt="Hamari Pyaari Yaadein">
        <img id="image2" class="slide top" alt="Hamari Pyaari Yaadein">
    </div>
    
    <div id="love-message-overlay" class="hidden fixed inset-0 bg-black/70 flex items-center justify-center z-40 opacity-0" style="transition: opacity 1.5s;">
        <h1 id="love-text" class="text-white text-6xl md:text-8xl text-center p-4">Love you my baby</h1>
    </div>

    <div id="main-content" class="flex items-center justify-center min-h-screen">
        <div id="start-screen" class="text-center text-white p-4">
            <h1 class="text-4xl md:text-6xl mb-8 leading-tight" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">
                Are you ready to see our beautiful story?
            </h1>
            <button id="ready-button" class="glow-button bg-white text-rose-500 text-2xl md:text-3xl font-bold py-4 px-10 rounded-full shadow-lg transition-transform transform hover:scale-105">
                Yes, I'm ready!
            </button>
        </div>

        <div id="surprise-screen" class="hidden text-center text-white p-4 flex-col items-center">
             <h1 class="text-5xl md:text-7xl mb-6" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">Aur meri kahani ka sabse khubsurat hissa TUM ho!</h1>
             <div class="w-64 h-64 md:w-80 md:h-80 rounded-full overflow-hidden shadow-2xl border-4 border-white bg-gray-200 flex items-center justify-center mt-8">
                 <img src="pic10.jpg" alt="The most beautiful person" class="w-full h-full object-cover"
                      onerror="this.onerror=null;this.src='https://placehold.co/400x400/FFC0CB/333333?text=Final+Photo';">
             </div>
             <p class="mt-4 text-2xl text-gray-100">Hamesha aur Hamesha.</p>
        </div>
    </div>

    <script>
        const startScreen = document.getElementById('start-screen');
        const surpriseScreen = document.getElementById('surprise-screen');
        const readyButton = document.getElementById('ready-button');
        const backgroundEffects = document.getElementById('background-effects');
        const slideshowContainer = document.getElementById('slideshow-container');
        const img1 = document.getElementById('image1');
        const img2 = document.getElementById('image2');
        const localSong = document.getElementById('local-song');
        const loveMessageOverlay = document.getElementById('love-message-overlay');

        const images = ['pic1.jpg','pic2.jpg','pic3.jpg','pic4.jpg','pic5.jpg','pic6.jpg','pic7.jpg','pic8.jpg','pic9.jpg','pic10.jpg'];
        const transitions = [ { out: 'slide-out-left', in: 'slide-in-right' }, { out: 'slide-out-right', in: 'slide-in-left' }, { out: 'fade-out', in: 'fade-in' }, { out: 'zoom-out', in: 'zoom-in' } ];

        images.forEach((img, i) => {
            const tempImg = new Image(); tempImg.src = img;
            tempImg.onerror = () => { images[i] = `https://placehold.co/1920x1080/4a044e/ffffff?text=Photo+${i+1}`; };
        });

        setInterval(() => {
            const sparkle = document.createElement('div'); sparkle.className = 'sparkle';
            sparkle.style.top = Math.random() * 100 + 'vh'; sparkle.style.left = Math.random() * 100 + 'vw';
            backgroundEffects.appendChild(sparkle);
            setTimeout(() => sparkle.remove(), 2000);
        }, 150);
        setInterval(() => {
            const heart = document.createElement('div'); heart.className = 'heart';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = Math.random() * 5 + 5 + 's';
            backgroundEffects.appendChild(heart);
            setTimeout(() => heart.remove(), 10000);
        }, 500);

        let currentImageIndex = 0;
        let isImg1Current = true;
        let slideshowTimeout;

        function runSlideshow() {
            if (currentImageIndex > 0 && currentImageIndex < images.length && currentImageIndex % 3 === 0) { showLoveMessage(); return; }
            if (currentImageIndex >= images.length) { endSlideshow(); return; }

            const currentImg = isImg1Current ? img1 : img2;
            const nextImg = isImg1Current ? img2 : img1;
            const transition = transitions[Math.floor(Math.random() * transitions.length)];

            nextImg.src = images[currentImageIndex];
            currentImg.className = 'slide bottom animate-out ken-burns ' + transition.out;
            nextImg.className = 'slide top animate-in ken-burns ' + transition.in;
            
            isImg1Current = !isImg1Current;
            currentImageIndex++;
            slideshowTimeout = setTimeout(runSlideshow, 4500);
        }
        
        function showLoveMessage() {
            clearTimeout(slideshowTimeout);
            loveMessageOverlay.classList.remove('hidden');
            setTimeout(() => loveMessageOverlay.style.opacity = 1, 100);
            
            setTimeout(() => {
                loveMessageOverlay.style.opacity = 0;
                setTimeout(() => {
                    loveMessageOverlay.classList.add('hidden');
                    currentImageIndex++;
                    runSlideshow();
                }, 1500);
            }, 3500);
        }

        function endSlideshow() {
            slideshowContainer.classList.add('fade-out-screen');
            setTimeout(() => {
                slideshowContainer.classList.add('hidden');
                surpriseScreen.classList.remove('hidden');
                surpriseScreen.classList.add('fade-in-screen', 'flex');
            }, 1500);
        }
        
        let hasStarted = false;
        readyButton.addEventListener('click', () => {
            if (hasStarted) return; hasStarted = true;
            readyButton.disabled = true;

            localSong.play().catch(e => console.error("Gana nahi mila: 'song.mp3'", e));

            startScreen.classList.add('fade-out-screen');
            setTimeout(() => {
                startScreen.classList.add('hidden');
                slideshowContainer.classList.remove('hidden');
                slideshowContainer.classList.add('initial-fade-in'); 
                
                img1.src = images[currentImageIndex];
                img1.className = 'slide top ken-burns';
                img2.className = 'slide bottom';
                currentImageIndex++;
                slideshowTimeout = setTimeout(runSlideshow, 4500);
            }, 1500);
        });
    </script>
</body>
</html>


